<div *ngIf="isLoading" class="spinner-border text-primary" role="status">

  <span class="sr-only">Loading...</span>

</div>



<h1>Listings & Requests In The City-Care Site Database</h1>

<mat-accordion  multi="true" *ngIf="!isLoading && userIsAuthenticated">
  <h3>All Organization Listings</h3>

  <mat-expansion-panel *ngFor="let org of orgs">

                           <mat-expansion-panel-header>
                                                 Org name: {{org.org_name}} &nbsp; {{ org.contact_name }}              
                           </mat-expansion-panel-header>

                           <mat-action-row *ngFor="let listing of org.listings">
                            
                           Qty: {{listing.quantity}} Details {{listing.description}} <br>

                            <a mat-button color="primary" [routerLink]="['/city-care/view-listing/', listing.id]">View</a>

                           </mat-action-row>

  </mat-expansion-panel>

</mat-accordion>

<hr>
<mat-accordion  multi="true" *ngIf="!isLoading && userIsAuthenticated">

  <h3>All User Requests</h3>

  <mat-expansion-panel *ngFor="let user of users">

                           <mat-expansion-panel-header>
                                                 Name: {{user.first_name}} &nbsp; {{ user.last_name }}              
                           </mat-expansion-panel-header>

                           <mat-action-row *ngFor="let request of user.requests">
                            
                           Details {{request.name}} <br>
                          
                            <a mat-button color="primary" [routerLink]="['/city-care/view-request/', request.id]">View</a>
                           </mat-action-row>
  </mat-expansion-panel>
</mat-accordion>


